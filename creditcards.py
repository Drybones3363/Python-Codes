import Netcat as net


import math
import random as r

ae = list((373341804709670
,346769050114605
,341979070410975
,348271719220830
,344622413635083
,346343551836833
,372701247987475
,342561803916145
,372206857362753
,371546324317398
,343863319253206
,346000903810367
,342730746105492
,348008738817794
,345706853837538
,374959370817152
,370005032917701
,370231646711021
,370795216925245
,348078921429939
,370535490490833
,345887528168309
,341602718197495
,377266486006747
,379218091985235
,373517848986537
,347024340606831
,372743459487612
,377711483786841
,341133903942206
,377038655769177
,377607180418607
,372028356488487
,377691996493756
,342922344551132))
d = list((
6011278108303245
,6011002667519292
,6011788289927729
,6011350572669615
,6011068639362236
,6011088515130044
,6011271034900937
,6011991707055327
,6011570663297410
,6011420818280434
,6011333543393309
,6011703165496418
,6011936801794065
,6011379314734254
,6011330933971215
,6011123440792418
,6011344035153176
,6011747575436472
,6011509619575610
,6011014527978600
,6011340895902298
,6011139774132617
,6011905532415522
,6011874400051852
,6011220012163414
,6011165841334613
,6011763979970248
,6011310131191220
,6011811210429449
,6011695284822427
,6011401300803941
,6011917980573413
,6011247139168265
,6011903421468991
,6011309193279667
,6011649716992803
,6011383985407950
,6011298462736897
,6011805817406545
,6011232452735841
,6011089898339913
,6011270163130449
,6011128442898170
,6011404322325547
,6011908618848640
,6011636415104160
,6011408752157247
,6011051458932016
,6011092762233774
,6011579977029013
,6011564552669821
,6011715858469387
,6011033479294642
,6011449104800399
,6011110384137338
,6011203191944960
,6011735286444208
,6011378033610597
,6011107592929654
,6011732820702613
,6011095438661740
,6011613255073151
,6011653035436708
,6011297314593597
,6011351880276812
,6011162464797077
,6011735348310488))
v = list((4539169758234772
,4929070796829094
,4556773483878619
,4539182475858963
,4532993128356602
,4916893865833605
,4532979004837336
,4916332404346282
,4539715469380146
,4556502972412899
,4698353022514923
,4476573543225836
,4539825510752068
,4929296548391873
,4556305636376884
,4716618458996531
,4024007142764728
,4716103047866990
,4539212075586449
,4024007169774857
))
mc = list((
5386263233786778
,5383079566460804
,5482309989359634
,5347788739922921
,5496990567168655
,5238287175745419
,5412537676769047
,5485399131644774
,5421614335560072
,5511868888766723
,5182497575799314
,5102076920317779
,5545683775274677
,5105824712311931
,5495971437793741
))


nc = net.Netcat('misc.chal.csaw.io', 8308)

def rand_digit():
    return int(math.floor(r.random()*10))

def digit_sum(n):
    s = str(n)
    ret = 0
    for i in range(len(s)):
        ret += int(s[i])
    return ret

def gen_number(start):
    s = str(start)
    total = 0
    for i in range(len(s)):
        if i%2 == 0:
            total += int(s[i])
        else:
            total += digit_sum(2*int(s[i]))
    for i in range(4,14):
        n = rand_digit()
        if i%2 == 0:
            total += n
        else:
            total += digit_sum(int(2*n))
        s += str(n)
    lastdigit = ((total*9)%10)
    s += str(lastdigit)
    return s

def gen_numberend(end):
    s = ''
    total = 0
    send = str(end)
    nn = 15
    if len(send) == 4:
        nn = 17
    for i in range(1,nn-len(send)):
        n = rand_digit()
        if i%2 == 1:
            total += digit_sum(int(2*n))
        else:
            total += n
        s += str(n)
    for i in range(len(send)):
        n = int(send[i])
        if len(s)%2 == 0:
            total += digit_sum(int(2*n))
        else:
            total += n
            
        s += str(n)
    print(total)
    lastdigit = ((total*9)%10)
    return str(lastdigit)+s

#02345705272707138


lst = [0,0,0,0]
while (True):
    print(nc.read_until(' new '))
    s1 = nc.read_until('!')
    print(s1)
    i = 0
    end = False
    if s1 == 'Discover!':
        i = 0
    elif s1 == 'Visa!':
        i = 1
    elif s1 == 'MasterCard!':
        i = 2
    elif s1 == 'American Express!':
        i = 3
    elif s1[0:22] == 'card that starts with ':
        i = int(s1[22:26])
    elif s1[0:21] == 'card which ends with ':
        if len(s1) == 23:
            i = int(s1[21])
        else:
            i = int(s1[21:25])
        end = True
    l = d
    if i == 1:
        l = v
    elif i == 2:
        l = mc
    elif i == 3:
        l = ae
    write = ''
    if i > 10:
        if end == True:
            write += gen_numberend(i)
        else:
            write += gen_number(i)
    elif end == True:
        write += gen_numberend(i)
    else:
        lst[i] += 1
        write = str(l[lst[i]%len(l)])
    print(write)
    nc.write(write+'\n')



